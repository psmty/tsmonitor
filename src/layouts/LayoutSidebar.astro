---
import LayoutCommon from './LayoutCommon.astro';
import NavBarSidebar from './NavBarSidebar.astro';

import { getSession } from "auth-astro/server";
import FormSignIn from "../components/FormSignIn.astro";

const session = await getSession(Astro.request);
---

<LayoutCommon>

{
	session ? (
  
	<NavBarSidebar />

	<div class="flex pt-16 overflow-hidden bg-gray-50 dark:bg-gray-900">
		<div
			id="main-content"
			class="relative w-full h-full flex flex-col overflow-y-hidden bg-gray-50 dark:bg-gray-900"
		>
			<slot />
		</div>
	</div>
	) : (
	  <div class="min-h-screen align-middle flex pb-[12vh]">
		<FormSignIn />
	  </div>
	)
  }
</LayoutCommon>

<style>
	#main-content {
		max-height: calc(100vh - 70px);
		min-height: calc(100vh - 70px);
	}
</style>